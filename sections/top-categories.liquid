{% assign collection_id = '478716625213' %} {# Replace with your collection ID #}

<div class="page-width">
  <h1>Sub Collections</h1>
  <div id="subCollectionsContainer">
    {% assign collection = collections[collection_id] %}
    {% if collection %}
      {% assign subCollections = collection.metafields.custom.sub_collections %}
      {% if subCollections %}
        {% for subCollection in subCollections %}
          <h2>{{ subCollection.title }}</h2>
        {% endfor %}
      {% else %}
        <p>No sub-collections found.</p>
      {% endif %}
    {% else %}
      <p>Collection not found.</p>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Top Category",
  "settings": [
    
  ],
  "blocks": [
    {
      "name": "Collection Categories",
      "type": "select",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Tab Title"
        },
        {
          "type": "text",
          "id": "sub_collections",
          "label": "Sub Collections (Comma Separated)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Top Category"
    }
  ]
}
{% endschema %}

{% javascript %}
// Make the API request
fetch('https://studyheart.myshopify.com/admin/api/2024-01/collections/478716625213.json', {
  method: 'GET',
  headers: {
    'Authorization': 'Basic ' + btoa('2f522bfa6c7b7a13d66abb73aaf3b579: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')
  }
})
.then(response => response.json())
.then(data => {
  // Extract the title from the response
  const title = data.collection.title;
  
  // Display the title in the appropriate container
  const subCollectionsContainer = document.getElementById('subCollectionsContainer1'); // Adjust the index as needed
  if (subCollectionsContainer) {
    const titleElement = document.createElement('h2');
    titleElement.textContent = title;
    subCollectionsContainer.appendChild(titleElement);
  }
})
.catch(error => {
  console.error('Error fetching collection:', error);
});
{% endjavascript %}
